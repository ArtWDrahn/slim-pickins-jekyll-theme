<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width initial-scale=1"> <title>Integrating Compass and Jekyll Without Plugins</title> <meta name="description" content="I find myself getting closer to the point where I’m done with the scaffolding and can finally start with the design. The more fun stuff I look at the more I ..."> <link href="//chrisanthropic.github.io/slim-pickins-jekyll-theme/css/main.css" media="screen, projection" rel="stylesheet" type="text/css"> <link rel="canonical" href="//chrisanthropic.github.io/slim-pickins-jekyll-theme/blog/2014/integrating-compass-and-jekyll-without-plugins"> <link rel="alternate" type="application/atom+xml" title="Slim Pickins Jekyll Theme" href="//chrisanthropic.github.io/slim-pickins-jekyll-theme/feed.xml"/> </head> <body> <main class="wrap"> <nav class="navbar"> <nav class="row"> <ul id="nav"> <div class="columns large-8 left primary-nav"> <li id="toggleMenu"><a href="#nav">Menu</a></li> <li id="hideMenu"><a href="toggleMenu">Menu</a></li> <li><a href="//chrisanthropic.github.io/slim-pickins-jekyll-theme/">Home</a></li> <li><a href="//chrisanthropic.github.io/slim-pickins-jekyll-theme/blog/">Blog</a></li> <li class="dropdown"> <a href="//chrisanthropic.github.io/slim-pickins-jekyll-theme">Misc</a> <ul> <li><a href="//chrisanthropic.github.io/slim-pickins-jekyll-theme#">Example</a></li> <li><a href="//chrisanthropic.github.io/slim-pickins-jekyll-theme#">Example2</a></li> </ul> </div> <div class="columns large-4 right primary-nav"> <li class="right"><a href="https://twitter.com/">Twitter</a></li> <li class="right"><a href="https://github.com/">Github</a></li> </div> </ul> </nav> </nav> <div class="row"> <header class="post-header"> <h1 class="post-title">Integrating Compass and Jekyll Without Plugins</h1> <p class="post-meta">Dec 9, 2014</p> </header> <article class="post-content"> <p>I find myself getting closer to the point where I’m done with the scaffolding and can finally start with the design. The more fun stuff I look at the more I realize that integrating Compass is probably a good idea.</p> <p>I don’t like plugins unless absolutely necessarry so while I’m sure the jekyll-compass plugin is great, I decided to figure out how to add Compass to my Jekyll/Octopress 3 site without any plugins.</p> <p>Here’s what I did.</p> <ul> <li>Add compass to your gemfile</li> <li>Install compass<br/> <code>bundle install --binstubs --path=vendor</code></li> <li>Run Compass for the first time so it generates a config file<br/> <code>bundle exec compass create --bare --sass-dir "_sass" --css-dir "css" --images-dir "images"</code> <ul> <li>This command creates a config.rb file wiht compass settings that are compatible with Jekyll</li> </ul> </li> <li>Move the default Jekyll css/main.css to _sass/main.css <ul> <li>remove the yaml frontmatter from the file once you’ve moved it to the _sass directory</li> </ul> </li> <li>Delete the css directory</li> <li>Update rakefile to run compass compile before building</li> </ul> <pre><code>desc "build the site"
task :build do
  system "bundle exec compass compile"
  system "bundle exec jekyll build"
  system "bundle exec rake minify_html"
  system "bundle exec rake optimizeimages"
end
</code></pre> <ul> <li>Run <code>bundle exec rake build</code></li> <li> <p>NOTE - compression settings are no longer set in _config.yml, you’ll need to add the following line to <code>config.rb</code> in oroder to compress css<br/> <code>output_style = :compressed</code></p> </li> <li>Update rakefile to run compass watch and jekyll serve together</li> </ul> <pre><code>##############
#   Develop  #
##############

# Useful for development
# It watches for chagnes and updates when it finds them

desc "Watch the site and regenerate when it changes"
task :watch do
  puts "Starting to watch source with Jekyll and Compass."
  system "compass compile" unless File.exist?("css/main.css")
  system "jekyll build"
  jekyllPid = Process.spawn("jekyll serve --watch")
  compassPid = Process.spawn("compass watch")

  trap("INT") {
    [jekyllPid, compassPid].each { |pid| Process.kill(9, pid) rescue Errno::ESRCH }
    exit 0
  }

  [jekyllPid, compassPid].each { |pid| Process.wait(pid) }
end
</code></pre> <ul> <li>Now you can run <code>bundle exec rake watch</code> and it runs compass watch &amp; jekyll serve together.</li> </ul> <p>Now you can use Compass mixins and import partials by adding <code>@import compass/blahblahblah</code> to your _sass/main.scss file.<br/> Running <code>bundle exec rake build</code> will then run <code>compass compile</code> to create your css/main.scss file, followed by <code>jekyll build</code> which will move that css/main.scss to _site/css/main.css</p> <p>In short:</p> <ul> <li>you can store any partials you want to in the _sass directory (or subdirectories)</li> <li>you can import these partials via your main.scss file</li> <li>any partials imported will be compiled into a single file (css/main.scss) when you run <code>compass compile</code></li> <li>the css/main.scss file will be built into _site/css/main.css when you run <code>jekyll build</code></li> <li>any partials not imported by your _sass/main.scss file will not be used</li> </ul> </article> </div> </main> <footer class="site-footer"> <div class="row"> <div class="small-6 columns"> </div> <div class="small-6 columns"> </div> </div> </footer> </body> </html>